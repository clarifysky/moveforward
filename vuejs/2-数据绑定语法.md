# 数据绑定语法

Vue.js使用一个基于DOM的模版实现，这意味着所有的Vue.js的模版都基本上是有效的，可剖析的带有特殊属性的强化HTML。这使Vue模版在本质上和基于字符串的模版不同。

## 窜改

### 文本

最基本的数据绑定形式是使用“小胡子”语法（两个弯曲的括号／大括号）的文本窜改：

```html
<span>Message: {{ msg }}</span>
```

这个大括号标签会被替换为对应的数据对象的`msg`属性，它同时会在对象的`msg`属性发生更改时更新：

你也可以执行一次窜改，在数据更改的时候不更新：

```html
<span>This will never change: {{* msg }}</span>
```

### 生HTML

双大括号将数据诠释为平白的文本，不是HTML。为了输出真正的HTML，你需要使用三倍的大括号：

```html
<div>{{{ raw_html }}}</div>
```

内容被插入为平白的HTML－数据绑定被忽略了。如果你想要重用模版碎片，你需要使用[partials](http://vuejs.org/api/#partial)。

> 武断地动态地渲染HTML是非常危险的，因为它会很容易导致[XSS攻击](https://en.wikipedia.org/wiki/Cross-site_scripting)。仅仅在受信任的内容上使用HTML窜改，**永远不要**用在用户提供的内容上。

### 属性

双括号也可以用在HTML属性内：

```html
<div id="item-{{ id }}"></div>
```

注意，属性窜改在Vue.js指令和特殊属性中不被允许。别担心，Vue.js会在双括号用到了错误的地方时生成警告。

## 绑定表达式

我们放置在双括号内的文本被称作**绑定表达式**。在Vue.js中，一个绑定表达式由单个JavaScript表达式组成，它后面可以跟一个或多个过滤器。

### JavaScript表达式

截止目前，我们只在模版中绑定了简单的属性，但实际上，Vue.js支持完整的JavaScript表达式能力：

```js
{{ number + 1 }}

{{ ok ? 'YES' : 'NO' }}

{{ message.split('').reverse().join('') }}

```

这些表达式会在所有者Vue实例的数据域内被解释。一个限制是，每个绑定中只能包含**一个单一表达式**。所以下面的是无法工作的：

```
<!-- this is a statement, not an expression: -->
{{ var a = 1 }}

<!-- flow control won't work either, use ternary expressions -->
{{ if (ok) { return message } }}
```

### 过滤器

Vue.js允许给表达式的末尾添加“过滤器”，通过在注释“管道”符号：

```javascript
{{ message | capitalize }}
```

这里，我们将`message`经过内置的`capitalize`过滤器处理，它实际上是一个返回大写值的JavaScript方法。Vue.js提供了大量内置的过滤器，稍后我们将讨论如何编写自己的过滤器。

注意，管道语法不是JavaScript语法的部分，因此，你不能在表达式内混用过滤器，你只能在一个表达式后面追加它们：

过滤器可以被链起来：

```javascript
{{ message | filterA | filterB }}
```

过滤器可以接收参数：

```js
{{ message | filterA 'arg1' arg2 }}
```

过滤器方法总是接收表达式的值作为第一个参数，引号包裹起来的参数会被作为平白字符串，而未被引号包裹的参数会被当成表达式计算，这里，平白字符串`'arg1'`会被作为第二个参数传递给过滤器，表达式`arg2`的值会被作为第三个参数传递给过滤器。

## 指令

指令是带有`v-`前缀的特殊属性，指令属性的值是**绑定表达式**，所以上面提到的JavaScript表达式规则和过滤器方法也可以用在这里。指令的工作是在它的表达式的值更改时，有回馈地应用特殊的行为到DOM上。我们再看一下在这篇介绍中提到的例子：

```html
<p v-if="greeting">Hello!</p>
```

在这里，`v-if`指令会根据表达式`greeting`的值的真假来插入/移除`<p>`元素。

### 参数

一些指令可以接收一个“参数”，在指令名后面标注一个冒号来做。例如，`v-bind`指令用来回馈式更新一个HTML属性：

```html
<a v-bind:href="url"></a>
```

在这里，`href`是参数，它告诉了`v-bind`指令，将元素的`href`属性绑定到表达式`url`的值上。你或许注意到了，这和使用`href="{{url}}"`达到了同样的效果，的确，事实上，属性窜改在内部被翻译成了`v-bind`。

另外一个例子是`v-on`指令，它会监视DOM的事件：

```html
<a v-on:click="doSomething">
```

在这里，参数名是需要监视的事件名，我们会讨论更多关于事件处理的细节。

### 修饰语

修饰语是特殊的后缀，通过一个点来标注出来，它表明了指令应该以别的方式形成边界。例如，`.literal`修饰语告诉指令将它的属性值诠释为字面意义上的字符串，而不是一个表达式：

```html
<a v-bind:href.literal="/a/b/c"></a>
```

当然，这么做看起来是无意义的，因为我们可以直接`href="/a/b/c"`，而不是使用指令。这里只是为了说明语法，我们将在后面看到更多修饰语的实际用处。

## 简记

`v-`扮演者一个用来区分Vue特定的属性的可见的暗号，这在你给一些已经存在的标记使用Vue.js来应用动态行为时非常有用，但是对于一些常用的指令会觉得冗余。同时，当你构建一个[SPA](https://en.wikipedia.org/wiki/Single-page_application)来让Vue.js管理所有模版的时候，`v-`的需求就变得不重要了，因此，Vue.js提供了两个最常用的指令的简记语法，`v-bind`和`v-on`：

### `v-bind`简记

```html
<!-- full syntax -->
<a v-bind:href="url"></a>

<!-- shorthand -->
<a :href="url"></a>

or

<!-- full syntax -->
<button v-bind:disabled="someDynamicCondition">Button</button>

<!-- shorthand -->
<button :disabled="someDynamicCondition">Button</button>
```

### `v-on`简记

<!-- full syntax -->
<a v-on:click="doSomething"></a>

<!-- shorthand -->
<a @click="doSomething"></a>

相对于有效的HTML来说，它们看起来有点不同，但是所有受Vue.js支持的浏览器都能正确地转换它，它们不会出现在最终的渲染标记中。简记语法彻底是彻底可选的，但你很可能会感激它，在你学习了更多关于它的用途之后。
